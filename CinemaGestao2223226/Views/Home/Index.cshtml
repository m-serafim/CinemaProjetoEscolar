@model IEnumerable<CinemaGestao.Models.Filme>
@{
    ViewData["Title"] = "Home";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

<!-- Hero Section with Rotating Movie Display -->
<section class="hero-banner">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-lg-5">
                <div class="hero-content">
                    <h1 class="hero-title">Welcome to Nexor Cinema</h1>
                    <p class="hero-subtitle">Discover amazing movies and book your seats for an unforgettable experience</p>
                    <a asp-controller="Catalogo" asp-action="Index" class="btn-cta">
                        VIEW AVAILABLE MOVIES
                    </a>
                </div>
            </div>
            <div class="col-lg-7">
                <div class="hero-rotating-section">
                    <div id="rotatingMovieDisplay" class="rotating-movie-container">
                        <!-- Movies will be loaded dynamically via JavaScript -->
                        <div class="rotating-movie-loading">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quick Access Section -->
<section class="quick-access-section fade-in-section">
    <div class="container">
        <h2 class="section-title">
            <i class="bi bi-star-fill"></i> Quick Access
        </h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="quick-access-card">
                    <div class="card-icon">
                        <i class="bi bi-film"></i>
                    </div>
                    <h3 class="card-title">Movie Catalog</h3>
                    <p class="card-description">
                        Explore the movies on show and choose your next session
                    </p>
                    <a asp-controller="Catalogo" asp-action="Index" class="card-link">
                        View Catalog <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-md-4">
                <div class="quick-access-card">
                    <div class="card-icon">
                        <i class="bi bi-ticket-perforated"></i>
                    </div>
                    <h3 class="card-title">My Reservations</h3>
                    <p class="card-description">
                        View and manage your reservation history
                    </p>
                    @if (User.Identity.IsAuthenticated && User.IsInRole("Cliente"))
                    {
                        <a asp-controller="Reservas" asp-action="Index" class="card-link">
                            View Reservations <i class="bi bi-arrow-right"></i>
                        </a>
                    }
                    else
                    {
                        <a asp-area="Identity" asp-page="/Account/Login" class="card-link">
                            Login to View <i class="bi bi-arrow-right"></i>
                        </a>
                    }
                </div>
            </div>
            <div class="col-md-4">
                <div class="quick-access-card">
                    <div class="card-icon">
                        <i class="bi bi-info-circle-fill"></i>
                    </div>
                    <h3 class="card-title">About Us</h3>
                    <p class="card-description">
                        Learn more about our cinema management system
                    </p>
                    <a href="#about-section" class="card-link">
                        Learn More <i class="bi bi-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Now Showing Section - Dynamic -->
<section class="now-showing-section fade-in-section">
    <div class="container">
        <h2 class="section-title">
            <i class="bi bi-film"></i> Now Showing
        </h2>
        <div class="row g-4">
            @if (Model != null && Model.Any())
            {
                @foreach (var filme in Model.Take(6))
                {
                    <div class="col-md-4">
                        <div class="movie-card">
                            <div class="movie-poster" style="aspect-ratio: 2/3;">
                                @if (!string.IsNullOrEmpty(filme.CapaUrl))
                                {
                                    <img src="@filme.CapaUrl" alt="@filme.Titulo" onerror="this.src='/images/movies/placeholder.svg'" />
                                }
                                else
                                {
                                    <img src="~/images/movies/placeholder.svg" alt="@filme.Titulo" />
                                }
                            </div>
                            <div class="movie-info">
                                <h3 class="movie-title">@filme.Titulo</h3>
                                <div class="movie-tags">
                                    <span class="tag genre-tag">@filme.Genero</span>
                                    @if (filme.DuracaoMinutos > 0)
                                    {
                                        <span class="tag duration-tag">@filme.DuracaoMinutos min</span>
                                    }
                                </div>
                                <p class="movie-description">
                                    @(filme.Descricao.Length > 120 ? filme.Descricao.Substring(0, 120) + "..." : filme.Descricao)
                                </p>
                                <a asp-controller="Catalogo" asp-action="Details" asp-route-id="@filme.Id" class="btn-view-details">
                                    <i class="bi bi-eye"></i> View Details
                                </a>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="no-movies-message">
                        <i class="bi bi-film"></i>
                        <p>No movies available at the moment. Check back soon!</p>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- About This Project Section -->
<section class="about-section fade-in-section" id="about-section">
    <div class="container">
        <h2 class="section-title">
            <i class="bi bi-info-circle-fill"></i> About This Project
        </h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="about-card">
                    <div class="card-icon-large">
                        <i class="bi bi-code-square"></i>
                    </div>
                    <h3 class="card-title">School Project</h3>
                    <p class="card-description">System developed as an academic project</p>
                    <p class="card-detail">ASP.NET Core MVC with Entity Framework</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="about-card">
                    <div class="card-icon-large">
                        <i class="bi bi-list-check"></i>
                    </div>
                    <h3 class="card-title">Features</h3>
                    <p class="card-description">Complete CRUD and authentication system</p>
                    <p class="card-detail">Management of movies, sessions and reservations</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="about-card">
                    <div class="card-icon-large">
                        <i class="bi bi-database-fill"></i>
                    </div>
                    <h3 class="card-title">Database</h3>
                    <p class="card-description">SQL Server with Identity Framework</p>
                    <p class="card-detail">User and role control</p>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        console.log('Nexor Cinema - Cinema Management System');
    </script>
}
